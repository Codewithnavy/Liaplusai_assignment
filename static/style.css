.chat-body { height: 60vh; max-height: 520px; overflow:auto; padding: 1rem; background: linear-gradient(180deg,#f8f9fa,#eef2f6); display:flex; flex-direction:column; gap:0.75rem }
.avatar { width:44px; height:44px; display:flex; align-items:center; justify-content:center; border-radius:8px; font-weight:700; color:#fff; flex-shrink:0 }
.avatar.user { background:linear-gradient(135deg,#2b8cff,#0d6efd) }
.avatar.bot { background:linear-gradient(135deg,#6c757d,#495057) }
.bubble { max-width:72%; padding:0.75rem 1rem; border-radius:14px; box-shadow: 0 6px 18px rgba(14,30,37,0.06); }
.user-bubble { background:#e9f6ff; margin-left:0.6rem; color:#04204a }
.bot-bubble { background:#ffffff; margin-right:0.6rem; color:#0b1730 }
.message-text { white-space:pre-wrap; word-break:break-word }
.small.text-muted { font-size: 0.72rem; }

body { background: #f1f5f9; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial }
.card { border-radius:14px }

.model-badge { font-size:0.66rem; padding:0.25rem 0.45rem }

.badge.llm-available { background:#28a745; color:#fff }
.badge.llm-unavailable { background:#dc3545; color:#fff }

/* Footer buttons spacing for small screens */
@media (max-width:576px) {
	.card-footer .form-control { min-width: 0; }
	.card-footer .btn { font-size:0.85rem; padding:0.45rem 0.6rem }
}

/* Make sure chat bubbles align nicely */
.chat-body .d-flex { align-items:flex-start }

.card-header h4 { letter-spacing: 0.2px }

.bot-bubble .model-badge { background: rgba(0,0,0,0.04); border-radius:6px }

/* Transient 'New' badge for incoming replies */
.new-badge { display:inline-block; margin-left:0.6rem; background:#28a745; color:#fff; font-size:0.65rem; padding:0.15rem 0.4rem; border-radius:6px; vertical-align:middle; transition: opacity 0.4s ease }

/* Accessibility helpers */
.visually-hidden { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap }
.visually-hidden-focusable:active, .visually-hidden-focusable:focus { position: static; height: auto; width: auto; overflow: visible; clip: auto; white-space: normal }

/* Skip link */
.skip-link { position: absolute; left: -999px; top: auto; width: 1px; height: 1px; overflow: hidden }
.skip-link:focus, .skip-link:active { position: static; left: 1rem; top: 1rem; width: auto; height: auto; padding: 0.5rem 0.75rem; background: #0d6efd; color: #fff; border-radius: 6px; z-index: 9999 }

/* Focus styles for keyboard users */
.bubble:focus { outline: 3px solid rgba(13,110,253,0.25); outline-offset: 2px }
.btn:focus { box-shadow: 0 0 0 0.15rem rgba(13,110,253,0.25) }

/* Simple chat toast for incoming bot messages */
.chat-toast {
	position: fixed;
	right: 1rem;
	bottom: 1.25rem;
	background: rgba(11,23,48,0.95);
	color: #ffffff;
	padding: 0.6rem 0.9rem;
	border-radius: 8px;
	box-shadow: 0 6px 20px rgba(2,6,23,0.25);
	font-size: 0.9rem;
	opacity: 0;
	transform: translateY(8px);
	transition: opacity 220ms ease, transform 220ms ease;
	z-index: 9999;
}
.chat-toast.visible { opacity: 1; transform: translateY(0); }
/* Position variants */
.chat-toast.bottom-right { right: 1rem; bottom: 1.25rem; left: auto; top: auto }
.chat-toast.bottom-left { left: 1rem; right: auto; bottom: 1.25rem; top: auto }
.chat-toast.top-right { right: 1rem; top: 1.25rem; left: auto; bottom: auto }

/* Settings gear and panel */
.settings-gear {
	position: fixed;
	right: 1rem;
	top: 1rem;
	z-index: 9999;
	background: #ffffff;
	border: 0; padding: 0.4rem 0.6rem; border-radius: 8px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); cursor: pointer; font-size: 1rem
}
.settings-panel { position: fixed; right: 1rem; top: 3.6rem; z-index: 9999; background:#fff; border-radius:8px; box-shadow:0 8px 30px rgba(2,6,23,0.12); padding:0.75rem; display:none; width: 18rem }
.settings-panel.open { display:block }
.settings-panel label { display:block; margin-bottom:0.45rem; font-size:0.9rem }
.settings-panel input[type="number"] { padding:0.2rem; }
